{% extends "layout.html" %}

{% block title %}Affirmations -MindBloom{% endblock %}

{% block head %}
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(to right, #cfd9df, #e2ebf0);
    color: #333;
    margin: 0;
    padding: 20px;
  }

  .container {
    max-width: 800px;
    margin: auto;
    padding: 30px;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  h1, h2 {
    text-align: center;
    color: #4b6584;
  }

  .featured-affirmation {
    background-color: #f7f9fc;
    border-left: 5px solid #6c5ce7;
    padding: 20px;
    margin-bottom: 25px;
    font-size: 1.4em;
    font-style: italic;
    position: relative;
  }

  .play-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 1.2em;
    background: none;
    border: none;
    cursor: pointer;
  }

  .reflection {
    margin-bottom: 25px;
  }

  textarea {
    width: 100%;
    padding: 10px;
    font-size: 1em;
    border-radius: 6px;
    border: 1px solid #ccc;
    resize: vertical;
  }

  .affirmation-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 30px;
  }

  .affirmation-card {
    flex: 1 0 45%;
    background: #dff9fb;
    padding: 10px 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    font-style: italic;
  }

  form {
    margin-bottom: 15px;
  }

  input[type="text"] {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    font-size: 1em;
    border: 1px solid #ccc;
    border-radius: 6px;
  }

  .btn {
    background-color: #6c5ce7;
    color: white;
    border: none;
    padding: 10px 16px;
    font-size: 1em;
    border-radius: 6px;
    cursor: pointer;
  }

  .btn:hover {
    background-color: #5a4bcf;
  }

  .example {
    font-size: 0.9em;
    color: #636e72;
  }

  @media (max-width: 600px) {
    .affirmation-card {
      flex: 1 0 100%;
    }
  }
</style>
{% endblock %}


{% block content %}
  <div class="container">
    <h1>üåû Daily Affirmation</h1>

    <div class="featured-affirmation" id="featured">
      <blockquote id="featured-text">
        "{{ featured_affirmation.text if featured_affirmation else 'I am worthy of love, success, and inner peace.' }}"
      </blockquote>
      <button
        class="play-btn"
        onclick="playAffirmation()"
        title="Listen to affirmation"
      >üîä</button>
    </div>

    <div class="reflection">
      <h2>üìù Reflect on this</h2>
      <textarea placeholder="How does this affirmation feel today?" rows="4"></textarea>
    </div>

    <h2>üìö Your Affirmation Collection</h2>
    <div class="affirmation-list" id="collection">
      {% for aff in affirmations %}
        <div class="affirmation-card">‚Äú{{ aff }}‚Äù</div>
      {% else %}
        <div class="affirmation-card">
          ‚ÄúYou‚Äôll see your affirmations here once you add them.‚Äù
        </div>
      {% endfor %}
    </div>

    <form onsubmit="addAffirmation(event)">
      <input
        type="text"
        id="newAffirmation"
        placeholder="Write your positive thought"
        required
      />
      <button type="submit" class="btn">Add Affirmation</button>
      <p class="example">
        Try: ‚ÄúI deserve happiness in every area of my life.‚Äù
      </p>
    </form>
  </div>
<script>
  function playAffirmation() {
    const text = document.getElementById('featured-text').textContent;
    const utterance = new SpeechSynthesisUtterance(text);
    speechSynthesis.speak(utterance);
  }

  function addAffirmation(e) {
    e.preventDefault();
    const input = document.getElementById('newAffirmation');
    const text = input.value.trim();
    if (!text) return;

    const card = document.createElement('div');
    card.className = 'affirmation-card';
    card.textContent = `‚Äú${text}‚Äù`;

    document.getElementById('collection').appendChild(card);
    input.value = '';
  }
</script>
{% endblock %}
